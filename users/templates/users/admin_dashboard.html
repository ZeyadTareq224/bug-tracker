{% extends 'users/base.html' %}
{% load static %}
{% block content %}


<main class="content">
	<div class="container-fluid p-0">
		{% for message in messages %}
		<p class="alert alert-success p-2">{{message}}</p>
		{% endfor %}
		<div class="row">
			<div class="col-xl-6 col-xxl-5 d-flex">
				<div class="w-100">
					<div class="row">
						<div class="col-sm-6">
							<div class="card">
								<div class="card-body">
									<h5 class="card-title mb-4">Admins</h5>
									<h1 class="display-5 mt-1 mb-3">{{total_admins}}</h1>
									<div class="mb-1">
										<span class="text-danger"> <i class="mdi mdi-arrow-bottom-right"></i> {{admins_precentage|floatformat:2}}% </span>
										<span class="text-muted">Are admins</span>
									</div>
								</div>
							</div>
							<div class="card">
								<div class="card-body">
									<h5 class="card-title mb-4">Developers</h5>
									<h1 class="display-5 mt-1 mb-3">{{total_developers}}</h1>
									<div class="mb-1">
										<span class="text-success"> <i class="mdi mdi-arrow-bottom-right"></i> {{developers_precentage|floatformat:2}}% </span>
										<span class="text-muted">Are developers</span>
									</div>
								</div>
							</div>
						</div>
						<div class="col-sm-6">
							<div class="card">
								<div class="card-body">
									<h5 class="card-title mb-4">Project Managers</h5>
									<h1 class="display-5 mt-1 mb-3">{{total_project_managers}}</h1>
									<div class="mb-1">
										<span class="text-success"> <i class="mdi mdi-arrow-bottom-right"></i> {{admins_project_managers|floatformat:2}}% </span>
										<span class="text-muted">Are PMs</span>
									</div>
								</div>
							</div>
							<div class="card">
								<div class="card-body">
									<h5 class="card-title mb-4">Ticket Submitters</h5>
									<h1 class="display-5 mt-1 mb-3">{{total_submitters}}</h1>
									<div class="mb-1">
										<span class="text-danger"> <i class="mdi mdi-arrow-bottom-right"></i> {{admins_submitters|floatformat:2}}% </span>
										<span class="text-muted">Are submitters</span>
									</div>
								</div>
							</div>
						</div>
					</div>
					<center>
						<div class="col-md-12">
							<div class="card">
								<div class="card-body">
									<h5 class="card-title mb-4">Total Users</h5>
									<h1 class="display-5">{{users.count}}</h1>
									<div class="mb-1">
									</div>
								</div>
							</div>
						</div>
					</center>
				</div>
			</div>


			<div class="col-xl-6 col-xxl-7">
				<div class="card flex-fill w-100">
					<div class="card-header">
						<h5 class="card-title mb-0">All Users in Database.</h5>
					</div>
					<div class="card-body py-3">
						
						<table id="table_id" class="table table-striped table-bordered">
							<thead>
								<tr>
									<th>Username</th>
									<th>Email</th>
									<th>Role</th>
									<th>Update</th>
									<th>Delete</th>
								</tr>
							</thead>
							<tbody>
								{% for user in users %}
								<tr>
									<td>{{user.username}}</td>
									<td>{{user.email}}</td>
									<td>{{user.groups.get}}</td>
									<td><a href="{% url 'update_user' user.id %}">Updata</a></td>
									<td><a href="{% url 'delete_user' user.id %}">Delete</a></td>
								</tr>
								{% endfor %}
							</tbody>
							<tfoot>
								<tr>
									<th>Username</th>
									<th>Email</th>
									<th>Role</th>
									<th>Update</th>
									<th>Delete</th>
								</tr>
							</tfoot>
						</table>

					</div>
				</div>
			</div>
		</div>

		
	</div>

</main>

{% endblock %}		